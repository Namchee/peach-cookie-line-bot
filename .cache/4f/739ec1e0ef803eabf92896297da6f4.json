{"id":"PZAE","dependencies":[{"name":"C:\\Users\\Namchee\\Desktop\\peach-bot\\.babelrc","includedInParent":true,"mtime":1563501172477},{"name":"C:\\Users\\Namchee\\Desktop\\peach-bot\\package.json","includedInParent":true,"mtime":1563542599570},{"name":"express","loc":{"line":1,"column":20},"parent":"C:\\Users\\Namchee\\Desktop\\peach-bot\\src\\routes\\routes.js","resolved":"C:\\Users\\Namchee\\Desktop\\peach-bot\\node_modules\\express\\index.js"},{"name":"@line/bot-sdk","loc":{"line":2,"column":35},"parent":"C:\\Users\\Namchee\\Desktop\\peach-bot\\src\\routes\\routes.js","resolved":"C:\\Users\\Namchee\\Desktop\\peach-bot\\node_modules\\@line\\bot-sdk\\dist\\index.js"},{"name":"./../middleware","loc":{"line":4,"column":31},"parent":"C:\\Users\\Namchee\\Desktop\\peach-bot\\src\\routes\\routes.js","resolved":"C:\\Users\\Namchee\\Desktop\\peach-bot\\src\\middleware.js"},{"name":"./../eventhandler","loc":{"line":5,"column":29},"parent":"C:\\Users\\Namchee\\Desktop\\peach-bot\\src\\routes\\routes.js","resolved":"C:\\Users\\Namchee\\Desktop\\peach-bot\\src\\eventhandler.js"},{"name":"./../../cfg/config","loc":{"line":7,"column":30},"parent":"C:\\Users\\Namchee\\Desktop\\peach-bot\\src\\routes\\routes.js","resolved":"C:\\Users\\Namchee\\Desktop\\peach-bot\\cfg\\config.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.router=void 0;var e=s(require(\"express\")),r=require(\"@line/bot-sdk\"),n=require(\"./../middleware\"),t=require(\"./../eventhandler\"),o=require(\"./../../cfg/config\");function s(e){return e&&e.__esModule?e:{default:e}}var u={channelAccessToken:o.config.access_token,channelSecret:o.config.secret},c=new r.Client(u),i=e.default.Router();exports.router=i,i.post(\"/webhook\",(0,r.middleware)(u),function(e,r,t){(0,n.checkSignature)(e,r,t)},function(e,r){Promise.all(e.body.events.map(function(e){return(0,t.replyMessage)(c,e)})).then(function(e){return r.status(200).send(e)}).catch(function(e){console.error(e),r.status(500).send(e)})});"},"sourceMaps":{"js":{"mappings":[{"source":"src/routes/routes.js","original":{"line":18,"column":0},"generated":{"line":1,"column":0}},{"source":"src/routes/routes.js","original":{"line":18,"column":0},"generated":{"line":1,"column":13}},{"source":"src/routes/routes.js","original":{"line":18,"column":0},"generated":{"line":1,"column":20}},{"source":"src/routes/routes.js","original":{"line":18,"column":0},"generated":{"line":1,"column":35}},{"source":"src/routes/routes.js","original":{"line":18,"column":0},"generated":{"line":1,"column":43}},{"source":"src/routes/routes.js","original":{"line":18,"column":0},"generated":{"line":1,"column":56}},{"source":"src/routes/routes.js","original":{"line":18,"column":0},"generated":{"line":1,"column":57}},{"source":"src/routes/routes.js","original":{"line":18,"column":0},"generated":{"line":1,"column":64}},{"source":"src/routes/routes.js","original":{"line":18,"column":0},"generated":{"line":1,"column":68}},{"source":"src/routes/routes.js","original":{"line":18,"column":0},"generated":{"line":1,"column":76}},{"source":"src/routes/routes.js","original":{"line":18,"column":0},"generated":{"line":1,"column":88}},{"source":"src/routes/routes.js","original":{"line":1,"column":0},"generated":{"line":1,"column":90}},{"source":"src/routes/routes.js","original":{"line":1,"column":0},"generated":{"line":1,"column":94}},{"source":"src/routes/routes.js","original":{"line":1,"column":0},"generated":{"line":1,"column":96}},{"source":"src/routes/routes.js","original":{"line":1,"column":0},"generated":{"line":1,"column":98}},{"source":"src/routes/routes.js","original":{"line":1,"column":0},"generated":{"line":1,"column":106}},{"source":"src/routes/routes.js","original":{"line":2,"column":0},"generated":{"line":1,"column":118}},{"source":"src/routes/routes.js","original":{"line":2,"column":0},"generated":{"line":1,"column":120}},{"source":"src/routes/routes.js","original":{"line":2,"column":0},"generated":{"line":1,"column":128}},{"source":"src/routes/routes.js","original":{"line":4,"column":0},"generated":{"line":1,"column":145}},{"source":"src/routes/routes.js","original":{"line":4,"column":0},"generated":{"line":1,"column":147}},{"source":"src/routes/routes.js","original":{"line":4,"column":0},"generated":{"line":1,"column":155}},{"source":"src/routes/routes.js","original":{"line":5,"column":0},"generated":{"line":1,"column":174}},{"source":"src/routes/routes.js","original":{"line":5,"column":0},"generated":{"line":1,"column":176}},{"source":"src/routes/routes.js","original":{"line":5,"column":0},"generated":{"line":1,"column":184}},{"source":"src/routes/routes.js","original":{"line":7,"column":0},"generated":{"line":1,"column":205}},{"source":"src/routes/routes.js","original":{"line":7,"column":0},"generated":{"line":1,"column":207}},{"source":"src/routes/routes.js","original":{"line":7,"column":0},"generated":{"line":1,"column":215}},{"source":"src/routes/routes.js","original":{"line":18,"column":0},"generated":{"line":1,"column":237}},{"source":"src/routes/routes.js","original":{"line":18,"column":0},"generated":{"line":1,"column":246}},{"source":"src/routes/routes.js","original":{"line":18,"column":0},"generated":{"line":1,"column":248}},{"source":"src/routes/routes.js","original":{"line":18,"column":0},"generated":{"line":1,"column":251}},{"source":"src/routes/routes.js","original":{"line":18,"column":0},"generated":{"line":1,"column":258}},{"source":"src/routes/routes.js","original":{"line":18,"column":0},"generated":{"line":1,"column":261}},{"source":"src/routes/routes.js","original":{"line":18,"column":0},"generated":{"line":1,"column":263}},{"source":"src/routes/routes.js","original":{"line":18,"column":0},"generated":{"line":1,"column":274}},{"source":"src/routes/routes.js","original":{"line":18,"column":0},"generated":{"line":1,"column":276}},{"source":"src/routes/routes.js","original":{"line":18,"column":0},"generated":{"line":1,"column":277}},{"source":"src/routes/routes.js","original":{"line":18,"column":0},"generated":{"line":1,"column":285}},{"source":"src/routes/routes.js","original":{"line":9,"column":0},"generated":{"line":1,"column":288}},{"source":"src/routes/routes.js","name":"config","original":{"line":9,"column":6},"generated":{"line":1,"column":292}},{"source":"src/routes/routes.js","original":{"line":9,"column":15},"generated":{"line":1,"column":294}},{"source":"src/routes/routes.js","name":"channelAccessToken","original":{"line":10,"column":2},"generated":{"line":1,"column":295}},{"source":"src/routes/routes.js","name":"cfg","original":{"line":10,"column":22},"generated":{"line":1,"column":314}},{"source":"src/routes/routes.js","name":"access_token","original":{"line":10,"column":26},"generated":{"line":1,"column":316}},{"source":"src/routes/routes.js","name":"access_token","original":{"line":10,"column":26},"generated":{"line":1,"column":323}},{"source":"src/routes/routes.js","name":"channelSecret","original":{"line":11,"column":2},"generated":{"line":1,"column":336}},{"source":"src/routes/routes.js","name":"cfg","original":{"line":11,"column":17},"generated":{"line":1,"column":350}},{"source":"src/routes/routes.js","name":"secret","original":{"line":11,"column":21},"generated":{"line":1,"column":352}},{"source":"src/routes/routes.js","name":"secret","original":{"line":11,"column":21},"generated":{"line":1,"column":359}},{"source":"src/routes/routes.js","name":"client","original":{"line":14,"column":6},"generated":{"line":1,"column":367}},{"source":"src/routes/routes.js","original":{"line":14,"column":15},"generated":{"line":1,"column":369}},{"source":"src/routes/routes.js","name":"Client","original":{"line":14,"column":19},"generated":{"line":1,"column":373}},{"source":"src/routes/routes.js","original":{"line":14,"column":15},"generated":{"line":1,"column":375}},{"source":"src/routes/routes.js","name":"config","original":{"line":14,"column":26},"generated":{"line":1,"column":382}},{"source":"src/routes/routes.js","name":"router","original":{"line":16,"column":6},"generated":{"line":1,"column":385}},{"source":"src/routes/routes.js","name":"express","original":{"line":16,"column":15},"generated":{"line":1,"column":387}},{"source":"src/routes/routes.js","name":"Router","original":{"line":16,"column":23},"generated":{"line":1,"column":389}},{"source":"src/routes/routes.js","name":"Router","original":{"line":16,"column":23},"generated":{"line":1,"column":397}},{"source":"src/routes/routes.js","original":{"line":18,"column":0},"generated":{"line":1,"column":406}},{"source":"src/routes/routes.js","original":{"line":18,"column":0},"generated":{"line":1,"column":414}},{"source":"src/routes/routes.js","original":{"line":18,"column":0},"generated":{"line":1,"column":421}},{"source":"src/routes/routes.js","name":"router","original":{"line":18,"column":0},"generated":{"line":1,"column":423}},{"source":"src/routes/routes.js","name":"post","original":{"line":18,"column":7},"generated":{"line":1,"column":425}},{"source":"src/routes/routes.js","original":{"line":18,"column":12},"generated":{"line":1,"column":430}},{"source":"src/routes/routes.js","original":{"line":19,"column":2},"generated":{"line":1,"column":442}},{"source":"src/routes/routes.js","name":"config","original":{"line":19,"column":13},"generated":{"line":1,"column":444}},{"source":"src/routes/routes.js","name":"config","original":{"line":19,"column":13},"generated":{"line":1,"column":446}},{"source":"src/routes/routes.js","name":"config","original":{"line":19,"column":13},"generated":{"line":1,"column":458}},{"source":"src/routes/routes.js","original":{"line":20,"column":2},"generated":{"line":1,"column":461}},{"source":"src/routes/routes.js","name":"req","original":{"line":20,"column":3},"generated":{"line":1,"column":470}},{"source":"src/routes/routes.js","name":"res","original":{"line":20,"column":8},"generated":{"line":1,"column":472}},{"source":"src/routes/routes.js","name":"next","original":{"line":20,"column":13},"generated":{"line":1,"column":474}},{"source":"src/routes/routes.js","name":"req","original":{"line":21,"column":19},"generated":{"line":1,"column":478}},{"source":"src/routes/routes.js","name":"req","original":{"line":21,"column":19},"generated":{"line":1,"column":480}},{"source":"src/routes/routes.js","name":"req","original":{"line":21,"column":19},"generated":{"line":1,"column":482}},{"source":"src/routes/routes.js","name":"req","original":{"line":21,"column":19},"generated":{"line":1,"column":498}},{"source":"src/routes/routes.js","name":"res","original":{"line":21,"column":24},"generated":{"line":1,"column":500}},{"source":"src/routes/routes.js","name":"next","original":{"line":21,"column":29},"generated":{"line":1,"column":502}},{"source":"src/routes/routes.js","original":{"line":23,"column":2},"generated":{"line":1,"column":506}},{"source":"src/routes/routes.js","name":"req","original":{"line":23,"column":3},"generated":{"line":1,"column":515}},{"source":"src/routes/routes.js","name":"res","original":{"line":23,"column":8},"generated":{"line":1,"column":517}},{"source":"src/routes/routes.js","name":"Promise","original":{"line":24,"column":4},"generated":{"line":1,"column":520}},{"source":"src/routes/routes.js","name":"all","original":{"line":24,"column":12},"generated":{"line":1,"column":528}},{"source":"src/routes/routes.js","name":"req","original":{"line":24,"column":16},"generated":{"line":1,"column":532}},{"source":"src/routes/routes.js","name":"body","original":{"line":24,"column":20},"generated":{"line":1,"column":534}},{"source":"src/routes/routes.js","name":"events","original":{"line":24,"column":25},"generated":{"line":1,"column":539}},{"source":"src/routes/routes.js","name":"map","original":{"line":24,"column":32},"generated":{"line":1,"column":546}},{"source":"src/routes/routes.js","original":{"line":24,"column":36},"generated":{"line":1,"column":550}},{"source":"src/routes/routes.js","name":"event","original":{"line":24,"column":36},"generated":{"line":1,"column":559}},{"source":"src/routes/routes.js","original":{"line":24,"column":45},"generated":{"line":1,"column":562}},{"source":"src/routes/routes.js","original":{"line":24,"column":45},"generated":{"line":1,"column":569}},{"source":"src/routes/routes.js","name":"client","original":{"line":24,"column":58},"generated":{"line":1,"column":571}},{"source":"src/routes/routes.js","name":"client","original":{"line":24,"column":58},"generated":{"line":1,"column":573}},{"source":"src/routes/routes.js","name":"client","original":{"line":24,"column":58},"generated":{"line":1,"column":587}},{"source":"src/routes/routes.js","name":"event","original":{"line":24,"column":66},"generated":{"line":1,"column":589}},{"source":"src/routes/routes.js","name":"then","original":{"line":25,"column":5},"generated":{"line":1,"column":595}},{"source":"src/routes/routes.js","original":{"line":25,"column":10},"generated":{"line":1,"column":600}},{"source":"src/routes/routes.js","name":"result","original":{"line":25,"column":10},"generated":{"line":1,"column":609}},{"source":"src/routes/routes.js","name":"res","original":{"line":25,"column":20},"generated":{"line":1,"column":612}},{"source":"src/routes/routes.js","name":"res","original":{"line":25,"column":20},"generated":{"line":1,"column":619}},{"source":"src/routes/routes.js","name":"status","original":{"line":25,"column":24},"generated":{"line":1,"column":621}},{"source":"src/routes/routes.js","original":{"line":25,"column":31},"generated":{"line":1,"column":628}},{"source":"src/routes/routes.js","name":"send","original":{"line":25,"column":36},"generated":{"line":1,"column":633}},{"source":"src/routes/routes.js","name":"result","original":{"line":25,"column":41},"generated":{"line":1,"column":638}},{"source":"src/routes/routes.js","name":"catch","original":{"line":26,"column":5},"generated":{"line":1,"column":643}},{"source":"src/routes/routes.js","original":{"line":26,"column":11},"generated":{"line":1,"column":649}},{"source":"src/routes/routes.js","name":"err","original":{"line":26,"column":11},"generated":{"line":1,"column":658}},{"source":"src/routes/routes.js","name":"console","original":{"line":27,"column":6},"generated":{"line":1,"column":661}},{"source":"src/routes/routes.js","name":"error","original":{"line":27,"column":14},"generated":{"line":1,"column":669}},{"source":"src/routes/routes.js","name":"err","original":{"line":27,"column":20},"generated":{"line":1,"column":675}},{"source":"src/routes/routes.js","name":"res","original":{"line":29,"column":6},"generated":{"line":1,"column":678}},{"source":"src/routes/routes.js","name":"status","original":{"line":29,"column":10},"generated":{"line":1,"column":680}},{"source":"src/routes/routes.js","original":{"line":29,"column":17},"generated":{"line":1,"column":687}},{"source":"src/routes/routes.js","name":"send","original":{"line":29,"column":22},"generated":{"line":1,"column":692}},{"source":"src/routes/routes.js","name":"err","original":{"line":29,"column":27},"generated":{"line":1,"column":697}}],"sources":{"src/routes/routes.js":"import express from 'express';\r\nimport { Client, middleware } from '@line/bot-sdk';\r\n\r\nimport { checkSignature } from './../middleware';\r\nimport { replyMessage } from './../eventhandler';\r\n\r\nimport { config as cfg } from './../../cfg/config';\r\n\r\nconst config = {\r\n  channelAccessToken: cfg.access_token,\r\n  channelSecret: cfg.secret,\r\n};\r\n\r\nconst client = new Client(config);\r\n\r\nconst router = express.Router();\r\n\r\nrouter.post('/webhook',\r\n  middleware(config),\r\n  (req, res, next) => {\r\n    checkSignature(req, res, next);\r\n  },\r\n  (req, res) => {\r\n    Promise.all(req.body.events.map(event => replyMessage(client, event)))\r\n    .then(result => res.status(200).send(result))\r\n    .catch(err => {\r\n      console.error(err);\r\n\r\n      res.status(500).send(err);\r\n    });\r\n  },\r\n);\r\n\r\nexport { router };\r\n"},"lineCount":null}},"error":null,"hash":"c031e839451a21c9506c796bef0e048b","cacheData":{"env":{}}}